# Worklog - NgÃ y 17/07/2025

## ğŸ“… ThÃ´ng tin cÆ¡ báº£n

- **NgÃ y**: 17/07/2025
- **Thá»©**: Thá»© NÄƒm
- **Tuáº§n thá»±c táº­p**: Tuáº§n thá»© 10
- **Thá»i gian lÃ m viá»‡c**: 8:00 - 17:00
- **Mood**: ğŸ˜ Tuy Ä‘Ã£ hoÃ n thÃ nh viá»‡c thiáº¿t láº­p Firehose, nhÆ°ng dá»¯ liá»‡u váº«n chÆ°a Ä‘áº¿n Ä‘Æ°á»£c OpenSearch, cáº§n thÃªm thá»i gian Ä‘á»ƒ debug

## ğŸ¯ Má»¥c tiÃªu ngÃ y hÃ´m nay

- [x]  Má»¥c tiÃªu 1: Thiáº¿t láº­p Kinesis Firehose Stream vá»›i Destination lÃ  OpenSearch vÃ  backup vÃ o S3 Bucket
- [x]  Má»¥c tiÃªu 2: Kiá»ƒm tra xem dá»¯ liá»‡u cÃ³ Ä‘áº¿n Ä‘Ã­ch nhÆ° dá»± Ä‘á»‹nh khÃ´ng

## ğŸ’¼ CÃ´ng viá»‡c Ä‘Ã£ thá»±c hiá»‡n

### 1. Thiáº¿t láº­p Kinesis Firehose Stream vá»›i Destination lÃ  OpenSearch vÃ  backup vÃ o S3 Bucket â±ï¸ 8:00 - 13:00

- **MÃ´ táº£**:
    - Táº¡o má»™t IAM Role má»›i cho Kinesis Firehose vá»›i cÃ¡c quyá»n cáº§n thiáº¿t Ä‘á»ƒ Ä‘á»c tá»« nguá»“n (Direct Put), ghi vÃ o OpenSearch Service domain vÃ  ghi vÃ o S3 Bucket Ä‘Ã£ táº¡o trÆ°á»›c Ä‘Ã³. Äáº·c biá»‡t, Ä‘Ã£ thÃªm cÃ¡c quyá»n liÃªn quan Ä‘áº¿n VPC Ä‘á»ƒ Firehose cÃ³ thá»ƒ truy cáº­p OpenSearch trong VPC.
    - Táº¡o má»™t Kinesis Firehose Stream má»›i thÃ´ng qua AWS Console.
    - Cáº¥u hÃ¬nh nguá»“n (Source) lÃ  "Direct Put" Ä‘á»ƒ cÃ³ thá»ƒ gá»­i dá»¯ liá»‡u trá»±c tiáº¿p vÃ o Firehose.
    - Chá»n Ä‘Ã­ch Ä‘áº¿n (Destination) lÃ  Amazon OpenSearch Service, trá» Ä‘áº¿n domain
    - Cáº¥u hÃ¬nh báº­t tÃ­nh nÄƒng backup vÃ o S3 Bucket Ä‘á»ƒ lÆ°u trá»¯ lÃ¢u dÃ i.
- **Káº¿t quáº£**: Kinesis Firehose Stream Ä‘Ã£ Ä‘Æ°á»£c táº¡o thÃ nh cÃ´ng, vÃ  cáº¥u hÃ¬nh Ä‘á»ƒ Ä‘áº©y dá»¯ liá»‡u tá»›i OpenSearch Ä‘á»“ng thá»i backup vÃ o S3
- **Tools/Tech**:
    - AWS Kinesis Firehose
    - AWS IAM
    - AWS S3
    - AWS OpenSearch Service
- **Links**: [GitHub commits, documentation, screenshots]

### 2. Kiá»ƒm tra xem dá»¯ liá»‡u cÃ³ Ä‘áº¿n Ä‘Ã­ch nhÆ° dá»± Ä‘á»‹nh khÃ´ng â±ï¸ 13:00 - 17:00

- **MÃ´ táº£**:
    - Gá»­i dá»¯ liá»‡u thá»­ nghiá»‡m vÃ o Firehose Stream
    - Kiá»ƒm tra S3 bucket: XÃ¡c minh ráº±ng cÃ¡c báº£n ghi Ä‘Æ°á»£c backup Ä‘Ã£ xuáº¥t hiá»‡n trong S3 theo cáº¥u hÃ¬nh
    - Kiá»ƒm tra OpenSearch Dashboard: Truy cáº­p Dashboard thÃ´ng qua Bastion Ä‘á»ƒ xem dá»¯ liá»‡u cÃ³ Ä‘Æ°á»£c ingested vÃ o OpenSearch index khÃ´ng
    - Kiá»ƒm tra biá»ƒu Ä‘á»“ vÃ  log lá»—i trong Firehose Stream metrics (Amazon CloudWatch) Ä‘á»ƒ xÃ¡c Ä‘á»‹nh tráº¡ng thÃ¡i gá»­i dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch
- **Káº¿t quáº£**:
    - Dá»¯ liá»‡u backup vÃ o S3 bucket thÃ nh cÃ´ng. CÃ¡c file log xuáº¥t hiá»‡n trong thÆ° má»¥c Ä‘Æ°á»£c cáº¥u hÃ¬nh
    - Tuy nhiÃªn, OpenSearch Dashboard váº«n khÃ´ng hiá»ƒn thá»‹ dá»¯ liá»‡u má»›i. Biá»ƒu Ä‘á»“ trong Firehose váº«n bÃ¡o lá»—i vÃ  sá»‘ lÆ°á»£ng báº£n ghi Ä‘áº¿n Ä‘Ã­ch OpenSearch lÃ  0
- **Tools/Tech**:
    - AWS Kinesis Firehose
    - AWS S3
    - AWS OpenSearch Dashboard
- **Links**: [GitHub commits, documentation, screenshots]

## ğŸ“š Kiáº¿n thá»©c há»c Ä‘Æ°á»£c

### ğŸ”§ Technical Skills

- **AWS Services**: Thá»±c hÃ nh cáº¥u hÃ¬nh **Kinesis Firehose** end-to-end, bao gá»“m viá»‡c táº¡o IAM Role, chá»n nguá»“n vÃ  Ä‘Ã­ch, cÅ©ng nhÆ° cáº¥u hÃ¬nh backup
- **DevOps**: TÃ¬m hiá»ƒu vá» cÃ¡c váº¥n Ä‘á» phá»• biáº¿n khi tÃ­ch há»£p cÃ¡c dá»‹ch vá»¥ AWS vá»›i nhau (quyá»n IAM, cáº¥u hÃ¬nh network)
- **Architecture**: Hiá»ƒu vá» luá»“ng dá»¯ liá»‡u trong má»™t há»‡ thá»‘ng logging Ä‘Æ¡n giáº£n: Data Source -> Kinesis Firehose -> OpenSearch / S3

### ğŸ’¡ Concepts & Theory

- **New Concepts**:
    - IAM permissions chi tiáº¿t cáº§n thiáº¿t cho Firehose Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i OpenSearch trong VPC
    - Destination errors trong Firehose
- **Best Practices**:
    - LuÃ´n kiá»ƒm tra IAM Role cá»§a dá»‹ch vá»¥ khi gáº·p lá»—i "permission denied" hoáº·c "access denied" giá»¯a cÃ¡c dá»‹ch vá»¥
    - Sá»­ dá»¥ng tÃ­nh nÄƒng backup cá»§a Firehose Ä‘á»ƒ Ä‘áº£m báº£o khÃ´ng máº¥t dá»¯ liá»‡u ngay cáº£ khi Ä‘Ã­ch chÃ­nh gáº·p sá»± cá»‘
- **Industry Knowledge**: Táº§m quan trá»ng cá»§a má»™t giáº£i phÃ¡p thu tháº­p vÃ  lÆ°u trá»¯ log táº­p trung trong cÃ¡c há»‡ thá»‘ng hiá»‡n Ä‘áº¡i Ä‘á»ƒ phá»¥c vá»¥ observability

### ğŸ¤ Soft Skills

- **Problem Solving**: ÄÃ£ phÃ¡t hiá»‡n vÃ  giáº£i quyáº¿t Ä‘Æ°á»£c váº¥n Ä‘á» vá» quyá»n IAM Role cá»§a Firehose. Äang tiáº¿p tá»¥c debug váº¥n Ä‘á» Firehose khÃ´ng gá»­i Ä‘Æ°á»£c dá»¯ liá»‡u Ä‘áº¿n OpenSearch
- **Learning**: TÃ­ch cá»±c tÃ¬m kiáº¿m thÃ´ng tin vá» cÃ¡c lá»—i Firehose, Ä‘áº·c biá»‡t lÃ  lá»—i liÃªn quan Ä‘áº¿n Ä‘Ã­ch OpenSearch trong VPC
- **Time Management**: ÄÃ£ hoÃ n thÃ nh cÃ¡c má»¥c tiÃªu chÃ­nh cá»§a ngÃ y, máº·c dÃ¹ cÃ³ phÃ¡t sinh váº¥n Ä‘á» cáº§n debug thÃªm

## ğŸš§ KhÃ³ khÄƒn vÃ  giáº£i phÃ¡p

### Váº¥n Ä‘á» 1: Lá»—i khi táº¡o Firehose Stream

- **MÃ´ táº£**: Khi cá»‘ gáº¯ng táº¡o Firehose Stream, gáº·p lá»—i cho biáº¿t IAM Role cá»§a Firehose khÃ´ng cÃ³ Ä‘á»§ quyá»n Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i cÃ¡c tÃ i nguyÃªn Ä‘Ã­ch, Ä‘áº·c biá»‡t lÃ  OpenSearch trong VPC.
- **Impact**: KhÃ´ng thá»ƒ táº¡o Ä‘Æ°á»£c Firehose Stream, ngÄƒn cáº£n viá»‡c tiáº¿n hÃ nh cÃ¡c bÆ°á»›c tiáº¿p theo
- **Root Cause**: IAM Role cá»§a Firehose thiáº¿u cÃ¡c quyá»n cáº§n thiáº¿t Ä‘á»ƒ táº¡o vÃ  quáº£n lÃ½ Network Interface (ENI) trong VPC cá»§a OpenSearch. Do OpenSearch Domain Ä‘Æ°á»£c táº¡o trong VPC, Firehose cáº§n má»™t sá»‘ quyá»n `ec2:` Ä‘á»ƒ thiáº¿t láº­p káº¿t ná»‘i máº¡ng ná»™i bá»™
- **Solution**: ÄÃ£ bá»• sung cÃ¡c quyá»n sau vÃ o IAM Policy cá»§a Firehose Role:
    - `ec2:DescribeVpcs`
    - `ec2:DescribeSubnets`
    - `ec2:DescribeSecurityGroups`
    - `ec2:CreateNetworkInterface`
    - `ec2:DeleteNetworkInterface`
    - `ec2:DescribeNetworkInterfaces`
- **Result**: ÄÃ£ táº¡o thÃ nh cÃ´ng Firehose Stream sau khi thÃªm cÃ¡c quyá»n nÃ y
- **Lesson**: Khi tÃ­ch há»£p cÃ¡c dá»‹ch vá»¥ AWS cÃ³ liÃªn quan Ä‘áº¿n VPC, hÃ£y luÃ´n nhá»› kiá»ƒm tra vÃ  cáº¥p quyá»n `ec2:` cáº§n thiáº¿t cho cÃ¡c dá»‹ch vá»¥ Ä‘á»ƒ chÃºng cÃ³ thá»ƒ quáº£n lÃ½ giao diá»‡n máº¡ng

### Váº¥n Ä‘á» 2: OpenSearch khÃ´ng nháº­n Ä‘Æ°á»£c log tá»« Firehose gá»­i Ä‘áº¿n

- **MÃ´ táº£**:
    - Xuáº¥t hiá»‡n lá»—i destination trong Firehose Stream
    - OpenSearch Domain khÃ´ng nháº­n Ä‘Æ°á»£c dá»¯ liá»‡u tá»« Firehose
- **Impact**: Luá»“ng dá»¯ liá»‡u log bá»‹ giÃ¡n Ä‘oáº¡n, khÃ´ng thá»ƒ kiá»ƒm tra hoáº·c phÃ¢n tÃ­ch dá»¯ liá»‡u
- **Root Cause**: ChÆ°a tÃ¬m Ä‘Æ°á»£c nguyÃªn nhÃ¢n chÃ­nh xÃ¡c
- **Solution**: ChÆ°a tÃ¬m Ä‘Æ°á»£c cÃ¡ch giáº£i quyáº¿t hoÃ n chá»‰nh
- **Result**: Váº¥n Ä‘á» váº«n cÃ²n tá»“n táº¡i. Firehose chÆ°a gá»­i Ä‘Æ°á»£c dá»¯ liá»‡u Ä‘áº¿n OpenSearch
- **Lesson**: Debug cÃ¡c váº¥n Ä‘á» tÃ­ch há»£p dá»‹ch vá»¥ phá»©c táº¡p cáº§n sá»± kiÃªn nháº«n vÃ  há»‡ thá»‘ng. ÄÃ´i khi, viá»‡c giáº£i quyáº¿t má»™t lá»—i chá»‰ lÃ  má»Ÿ ra má»™t lá»—i khÃ¡c á»Ÿ lá»›p sÃ¢u hÆ¡n

## ğŸ’­ Reflection & Insights

### What went well today?

- HoÃ n thÃ nh viá»‡c cáº¥u hÃ¬nh Firehose Stream vÃ  hiá»ƒu rÃµ cÃ¡c bÆ°á»›c liÃªn quan.
- Giáº£i quyáº¿t thÃ nh cÃ´ng váº¥n Ä‘á» quyá»n IAM phá»©c táº¡p cho Firehose khi tÆ°Æ¡ng tÃ¡c vá»›i VPC.
- XÃ¡c nháº­n Ä‘Æ°á»£c dá»¯ liá»‡u backup thÃ nh cÃ´ng vÃ o S3, Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n dá»¯ liá»‡u.

### What could be improved?

- Hiá»ƒu sÃ¢u hÆ¡n vá» Ä‘á»‹nh dáº¡ng dá»¯ liá»‡u mÃ  OpenSearch mong muá»‘n tá»« Firehose Ä‘á»ƒ trÃ¡nh cÃ¡c váº¥n Ä‘á» vá» phÃ¢n tÃ­ch/ingest.
- Cáº§n kiá»ƒm tra ká»¹ cÃ¡c log chi tiáº¿t hÆ¡n tá»« OpenSearch Ä‘á»ƒ xem nÃ³ cÃ³ bÃ¡o lá»—i gÃ¬ khi nháº­n dá»¯ liá»‡u tá»« Firehose khÃ´ng.
- PhÃ¢n bá»• thá»i gian debugging há»£p lÃ½ hÆ¡n Ä‘á»ƒ khÃ´ng bá»‹ cuá»‘n vÃ o má»™t váº¥n Ä‘á» quÃ¡ lÃ¢u.

### Key Insights

- IAM permissions lÃ  má»™t thÃ¡ch thá»©c lá»›n: Viá»‡c cáº¥u hÃ¬nh Ä‘Ãºng quyá»n giá»¯a cÃ¡c dá»‹ch vá»¥ AWS, Ä‘áº·c biá»‡t khi cÃ³ VPC xen vÃ o, Ä‘Ã²i há»i sá»± hiá»ƒu biáº¿t ráº¥t sÃ¢u sáº¯c vÃ  tá»‰ má»‰.
- OpenSearch Service cÃ³ nhiá»u lá»›p báº£o máº­t: NgoÃ i IAM vÃ  Domain Policies, Fine-grained access control lÃ  má»™t lá»›p quan trá»ng khÃ¡c cáº§n Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘Ãºng Ä‘á»ƒ dá»¯ liá»‡u Ä‘Æ°á»£c ingested.
- S3 lÃ  má»™t giáº£i phÃ¡p backup Ä‘Ã¡ng tin cáº­y: Ráº¥t dá»… dÃ ng Ä‘á»ƒ cáº¥u hÃ¬nh Firehose backup dá»¯ liá»‡u vÃ o S3, cung cáº¥p má»™t lÆ°á»›i an toÃ n cho dá»¯ liá»‡u log.

### Questions & Curiosities

- LÃ m tháº¿ nÃ o Ä‘á»ƒ xem log chi tiáº¿t hÆ¡n tá»« OpenSearch vá» cÃ¡c báº£n ghi bá»‹ tá»« chá»‘i/lá»—i khi ingested?
- Liá»‡u cÃ³ cáº§n cáº¥u hÃ¬nh má»™t Lambda Transformation trong Firehose Ä‘á»ƒ Ä‘á»‹nh dáº¡ng láº¡i dá»¯ liá»‡u trÆ°á»›c khi gá»­i tá»›i OpenSearch khÃ´ng?

## ğŸ“‹ Káº¿ hoáº¡ch ngÃ y mai

### Priority Tasks

- [ ]  **High**: Debug váº¥n Ä‘á» OpenSearch khÃ´ng nháº­n Ä‘Æ°á»£c dá»¯ liá»‡u tá»« Firehose

### Learning Goals

- [ ]  NghiÃªn cá»©u cÃ¡ch OpenSearch Service xá»­ lÃ½ cÃ¡c loáº¡i dá»¯ liá»‡u vÃ  yÃªu cáº§u vá» cáº¥u trÃºc dá»¯ liá»‡u khi ingested tá»« Firehose
- [ ]  TÃ¬m hiá»ƒu cáº¥u hÃ¬nh cÃ¡c quyá»n cáº§n thiáº¿t Ä‘á»ƒ Firehose gá»­i Ä‘Æ°á»£c log Ä‘áº¿n OpenSearch

### Meetings & Deadlines

- [ ]  HoÃ n thÃ nh project trÆ°á»›c ngÃ y 20

## ğŸ“Š Self Assessment

### Productivity

- **Score**: [7/10]
- **Reason**: ÄÃ£ hoÃ n thÃ nh má»¥c tiÃªu cáº¥u hÃ¬nh, nhÆ°ng váº¥n Ä‘á» vá» ingestion dá»¯ liá»‡u Ä‘Ã£ cáº£n trá»Ÿ viá»‡c hoÃ n táº¥t hoÃ n toÃ n
- **Improvement**: Cáº§n táº­p trung hÆ¡n vÃ o viá»‡c debug vÃ  khÃ´ng Ä‘á»ƒ máº¥t quÃ¡ nhiá»u thá»i gian vÃ o cÃ¡c lá»—i nhá»

### Learning

- **Score**: [8/10]
- **New Knowledge**: Hiá»ƒu sÃ¢u hÆ¡n vá» cÃ¡c lá»›p quyá»n cá»§a Firehose vÃ  OpenSearch, cÅ©ng nhÆ° quÃ¡ trÃ¬nh debugging há»‡ thá»‘ng dá»¯ liá»‡u
- **Application**: Váº­n dá»¥ng cÃ¡c kiáº¿n thá»©c vá» IAM, VPC vÃ  cáº¥u hÃ¬nh dá»‹ch vá»¥ AWS Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» thá»±c táº¿

### Overall Satisfaction

- **Score**: [6/10]
- **Highlights**: ÄÃ£ giáº£i quyáº¿t Ä‘Æ°á»£c má»™t váº¥n Ä‘á» quyá»n phá»©c táº¡p khÃ¡c vÃ  cÃ³ cÃ¡i nhÃ¬n rÃµ rÃ ng hÆ¡n vá» bÆ°á»›c tiáº¿p theo
- **Areas for Growth**: Cáº§n cáº£i thiá»‡n ká»¹ nÄƒng debug cÃ¡c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n format dá»¯ liá»‡u vÃ  cáº¥u hÃ¬nh service-level cá»§a OpenSearch

---

**ğŸ“ Notes for tomorrow:**
[Ghi chÃº quan trá»ng cho ngÃ y mai]

**ğŸ¯ Week Progress:** Day 4/5 completed.

---

*Worklog created by: TrÆ°Æ¡ng ÄÃ¬nh VÅ© Khanh*

*Next review: 18/07/2025*