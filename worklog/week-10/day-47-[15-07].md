# Worklog - Ngày 15/07/2025

## 📅 Thông tin cơ bản

- **Ngày**: 15/07/2025
- **Thứ**: Thứ Ba
- **Tuần thực tập**: Tuần thứ 10
- **Thời gian làm việc**: 13:00 - 17:00
- **Mood**: 😔 Gặp khó khăn với việc truy cập OpenSearch Dashboard, mất khá nhiều thời gian để debug nhưng chưa giải quyết triệt để

## 🎯 Mục tiêu ngày hôm nay

- [ ]  Mục tiêu 1: Truy cập vào OpenSearch Dashboard thông qua Bastion
- [ ]  Mục tiêu 2: Thiết lập Kinesis Firehose Stream với Destination là OpenSearch và backup vào S3 Bucket

## 💼 Công việc đã thực hiện

### 1. Truy cập vào OpenSearch Dashboard thông qua Bastion ⏱️ 13:00 - 17:00

- **Mô tả**:
    - Kết nối SSH đến Bastion
    - Tạo tunnel từ Bastion đến OpenSearch domain
    - Thử kết nối đến OpenSearch Dashboard
- **Kết quả**: Đã tạo được tunnel nhưng bị denied khi truy cập đến OpenSearch Dashboard
- **Tools/Tech**:
    - Amazon OpenSearch Service
    - Amazon EC2
    - Amazon Q
- **Links**: [GitHub commits, documentation, screenshots]

## 📚 Kiến thức học được

### 🔧 Technical Skills

- **AWS Services**: Tìm hiểu sâu hơn về cơ chế bảo mật của **Amazon OpenSearch Service**, bao gồm **Domain Policy**, **IAM Role** và **Security Group** trong ngữ cảnh truy cập qua Bastion Host. Nắm vững hơn về **EC2 Instance** và cách sử dụng nó như một **Bastion Host**.
- **DevOps**: Thực hành kỹ thuật **SSH Tunneling** để truy cập các tài nguyên nằm trong VPC từ bên ngoài một cách an toàn.
- **Architecture**: Hiểu rõ hơn về các lớp bảo mật trong AWS (Network ACLs, Security Groups, IAM, Resource Policies) và tầm quan trọng của việc cấu hình đúng quyền giữa các dịch vụ.

### 💡 Concepts & Theory

- **New Concepts**:
    - **Signed URLs/Requests** trong OpenSearch Service khi sử dụng IAM để xác thực.
    - **PrivateLink/VPC Endpoint** (mặc dù chưa dùng nhưng đã tìm hiểu sơ bộ như một giải pháp thay thế cho Bastion trong một số trường hợp).
- **Best Practices**:
    - Luôn kiểm tra **Security Groups** và **Network ACLs** trước khi kiểm tra các chính sách truy cập cấp cao hơn.
    - Nguyên tắc **Least Privilege** trong IAM (đã cố gắng áp dụng nhưng chưa thành công hoàn toàn).
- **Industry Knowledge**: Tầm quan trọng của việc **troubleshooting** có hệ thống khi làm việc với các hệ thống phân tán và bảo mật nhiều lớp.

### 🤝 Soft Skills

- **Problem Solving**: Đã dành thời gian phân tích vấn đề từ nhiều góc độ (SSH tunnel, Security Groups, IAM policies, OpenSearch Domain Policy) để tìm ra nguyên nhân.
- **Learning**: Tích cực tìm kiếm thông tin từ tài liệu AWS, Stack Overflow và các blog kỹ thuật để giải quyết vấn đề.

## 🚧 Khó khăn và giải pháp

### Vấn đề 1: Kết nối đến OpenSearch Dashboard bị từ chối

- **Mô tả**:
    - Khi kết nối đến OpenSearch Dashboard từ Bastion thông qua SSH Tunnel, kết nối bị từ chối do thiếu quyền ESHttp.
    - Mặc dù đã kiểm tra và điều chỉnh Security Group để cho phép traffic từ Bastion, và IAM Role của Bastion cũng có quyền, nhưng vẫn không truy cập được.
- **Impact**: Không sử dụng được OpenSearch Dashboard cho các bước tiếp theo
- **Root Cause**: Cấu hình thiếu quyền cho Bastion kết nối đến OpenSearch
- **Solution**: Kiểm tra lại OpenSearch Domain Policy, IAM Role, Security Group để đảm bảo đã có các quyền cần thiết
- **Result**: Đã loại trừ được một số nguyên nhân (Security Group, IAM Role, OpenSearch Domain Policy), nhưng vấn đề vẫn chưa được giải quyết triệt để. Cần tìm hiểu sâu hơn về cơ chế xác thực của OpenSearch Dashboard
- **Lesson**: Debugging các vấn đề về quyền truy cập trong AWS cần kiểm tra nhiều lớp (Network, IAM, Resource Policy) và đôi khi cần loại trừ từng lớp một.

## 💭 Reflection & Insights

### What went well today?

- Kỹ năng **SSH Tunneling** được thực hành và củng cố vững chắc.
- Đã học được cách **debug và loại trừ nguyên nhân** khi gặp vấn đề về quyền truy cập trong môi trường AWS.
- Khả năng **đọc hiểu tài liệu** kỹ thuật và tìm kiếm giải pháp đã được cải thiện.

### What could be improved?

- Cần dành thời gian **chuẩn bị kỹ hơn về các cơ chế xác thực** của OpenSearch trước khi bắt đầu triển khai, để tránh mất thời gian debugging sau này.
- Có thể **tìm kiếm các giải pháp thay thế** việc truy cập Dashboard qua Bastion nếu việc xác thực quá phức tạp (ví dụ: VPN Client hoặc AWS Client VPN nếu có).
- Cần **nắm rõ hơn luồng xác thực** giữa EC2 instance (với IAM Role) và OpenSearch Service.

### Key Insights

- **Bảo mật trong AWS là đa lớp và phức tạp**: Một vấn đề tưởng chừng đơn giản như "Denied access" có thể ẩn chứa nhiều nguyên nhân từ các tầng khác nhau (network, IAM, service policy, authentication method).
- **Thực hành giúp hiểu sâu hơn lý thuyết**: Dù đã đọc tài liệu, việc gặp lỗi thực tế giúp cán sâu hơn kiến thức về cách các quyền IAM và chính sách truy cập hoạt động.
- **Kiên nhẫn là chìa khóa khi debugging**: Đừng nản lòng khi gặp lỗi, hãy chia nhỏ vấn đề và loại trừ từng khả năng.

### Questions & Curiosities

- Làm thế nào để cấu hình IAM user/role truy cập OpenSearch Dashboard một cách đúng đắn và an toàn nhất?
- Liệu có cần tạo một **IAM user** riêng với Access Key/Secret Key để cấu hình truy cập OpenSearch Dashboard từ Bastion, thay vì dựa vào IAM Role của EC2?
- Các **best practices** cho việc quản lý quyền truy cập OpenSearch Dashboard trong môi trường sản phẩm là gì?

## 📋 Kế hoạch ngày mai

### Priority Tasks

- [ ]  **High**: Tìm cách fix vấn đề về quyền khi kết nối đến OpenSearch Dashboard.
- [ ]  **Low**: Thiết lập Kinesis Firehose Stream với Destination là OpenSearch và backup vào S3 Bucket (sẽ thực hiện sau khi OpenSearch Dashboard truy cập được).

### Learning Goals

- [ ]  Nghiên cứu kỹ về **Identity and Access Management (IAM)** trong Amazon OpenSearch Service, đặc biệt là cách **IAM roles** và **domain policies** tương tác với nhau để cấp quyền truy cập Dashboard.
- [ ]  Đọc các bài viết, tutorial về **"Accessing OpenSearch Dashboard in VPC"**.

### Meetings & Deadlines

- [ ]  Cần có giải pháp cho vấn đề truy cập Dashboard trước cuối ngày để có thể tiếp tục công việc.

## 📊 Self Assessment

### Productivity

- **Score**: [6/10]
- **Reason**: Đã hoàn thành một mục tiêu nhỏ (SSH Tunnel) nhưng mục tiêu chính (truy cập Dashboard) vẫn còn dang dở do gặp phải vấn đề phức tạp về quyền.
- **Improvement**: Cần phân bổ thời gian hiệu quả hơn cho việc debugging, hoặc tìm kiếm sự hỗ trợ sớm hơn khi gặp bế tắc.

### Learning

- **Score**: [8/10]
- **New Knowledge**: Học được rất nhiều về các lớp bảo mật, troubleshooting và cơ chế xác thực của AWS OpenSearch Service.
- **Application**: Áp dụng kỹ năng SSH và debugging vào một vấn đề thực tế, dù chưa thành công hoàn toàn.

### Collaboration

- **Score**: [7/10]
- **Interactions**: Đã ghi chú chi tiết vấn đề và hỏi lên group để nhận được sự hỗ trợ.
- **Contributions**: Đã cố gắng hết sức để giải quyết vấn đề một cách độc lập trước khi cần sự trợ giúp.

### Overall Satisfaction

- **Score**: [6/10]
- **Highlights**: Đã học được nhiều về debugging và các lớp bảo mật của AWS.
- **Areas for Growth**: Cần cải thiện kỹ năng giải quyết vấn đề phức tạp liên quan đến quyền truy cập và xác thực, cũng như biết khi nào cần tìm kiếm sự giúp đỡ từ mentor.

## 📎 Attachments & Links

### Code & Projects

- [Notion](https://www.notion.so/Workshop-223c3d0326c8809e8078e153862ef46d?pvs=21)

---

**📝 Notes for tomorrow:**
[Ghi chú quan trọng cho ngày mai]

**🎯 Week Progress:** Day 2/5 completed.

---

*Worklog created by: Trương Đình Vũ Khanh*

*Next review: 16/07/2025*